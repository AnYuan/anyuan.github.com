<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Anyuan&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="记录点滴">
<meta property="og:type" content="website">
<meta property="og:title" content="Anyuan's blog">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Anyuan's blog">
<meta property="og:description" content="记录点滴">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Anyuan's blog">
<meta name="twitter:description" content="记录点滴">
  
    <link rel="alternative" href="/atom.xml" title="Anyuan&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Anyuan&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">home</a>
        
          <a class="main-nav-link" href="/archives">archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-iOS-KVO-Key-Value-Observing-总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/10/29/iOS-KVO-Key-Value-Observing-总结/" class="article-date">
  <time datetime="2013-10-29T03:19:27.000Z" itemprop="datePublished">2013-10-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/29/iOS-KVO-Key-Value-Observing-总结/">iOS KVO(Key-Value Observing)总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>KVO 允许观察者对被观察对象的特定属性的值进行观察，如果被观察对象的特定值更改，会触发一个<code>observeValueForKeyPath:(NSString <em>)keyPath ofObject:(id)object change:(NSDictionary </em>)change context:(void *)context</code>的方法。</p>
<p>KVO与NSNotificationCenter有很多相似的地方。首先，KVO需要给被观察者添加观察者，<code>addObserver:forKeyPath:options:context:</code>.取消观察，用<code>removeObserver:forKeyPath:context:</code>.</p>
<p>KVO与NSNotificationCenter不同的是，你不用去手动调用某个方法，如果没有观察者到情况下，广播是会发送到，而KVO则不会执行。KVO只会在有观察者对象到情况下才会执行通知方法。这使得KVO在某些对性能要求很高的地方，是一个很好到选择。</p>
<p>注册观察者</p>
<pre><code>- (<span class="keyword">void</span>)registerAsObserver
{
  [object addObserver:inspector
      forKeyPath:@<span class="string">"someProperty"</span>
        <span class="keyword">options</span>:NSKeyValueObservingOptionNew
        comtext:<span class="keyword">NULL</span>];
}
</code></pre><p>接受通知</p>
<pre><code><span class="tag">-</span> (void)<span class="tag">observeValueForKeyPath</span>:(NSString *)<span class="tag">keyPath</span>
                   <span class="tag">ofObject</span>:(id)<span class="tag">object</span>
                      <span class="tag">change</span>:(NSDictionary *)<span class="tag">change</span>
                      <span class="tag">context</span>:(void *)<span class="tag">context</span>
{
    <span class="tag">if</span>(someCondition)
    {
       <span class="comment">//do something</span>
    }

    <span class="comment">/*
      Be sure to call the superclass's implementation
      * if it implements it *
      NSObject does not implement the method.
     */</span>
    <span class="attr_selector">[super observeValueForKeyPath:keyPath
                         ofObject:object
                          change:change
                           context:context]</span>;
}
</code></pre><p>取消观察者</p>
<pre><code>- (<span class="typename">void</span>)unregisterForChangeNotification
{
   [observedObject <span class="string">removeObserver:</span>inspector <span class="string">forKeyPath:</span>@<span class="string">"someProperty"</span>];
}
</code></pre><p>关于如何查看一个对象是否有观察者，</p>
<p>在网上查了一下，有一个<code>[object observationInfo]</code>的方法，如果没有观察者返回nil.</p>
<p>对对象删除观察者还可以用</p>
<pre><code><span class="variable">@try</span>
{
  <span class="attr_selector">[object removeObserver:inspector forKeyPath:@"someProperty"]</span>;
}
<span class="variable">@catch</span> (NSException *e)
{
}
</code></pre><p>来防止对一个没有观察者的对象删除造成程序crash.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/10/29/iOS-KVO-Key-Value-Observing-总结/" data-id="cl8wql7cf001a03xkv3w8g02c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS-block-总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/10/18/iOS-block-总结/" class="article-date">
  <time datetime="2013-10-18T08:20:28.000Z" itemprop="datePublished">2013-10-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/18/iOS-block-总结/">iOS block 总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Block objects are a C-based language feature that you can use in your C, Objective-C, and C++ code. Blocks make it easy to define a self-contained unit of work.</p>
<p>One of the key advantages of blocks is their ability to use variables from outside their own lexical scope. When you define a block inside a function or method, the block acts as a traditional code block would in some ways. For example, a block can read the values of variables defined in the parent scope. Variables accessed by the block are copied to the block data structure on the heap so that the block acan access them later. When blocks are added to a dispatch queue, these values must typically be left in a read-only format. However, blocks that are executed synchronously can also use variables that have the __block keyword prepended to return data back to the parent’s calling scope.</p>
<p>You declare blocks inline with your code using a syntax that is similar to the syntax used for function pointers. The main difference between a block and a fuction pointer is that the block name is preceded with a caret (^) instead of an asterisk (*). Like a function pointer, you can pass arguments to a block and receive a return value from it.</p>
<pre><code><span class="keyword">int</span> x = <span class="number">123</span>;
<span class="keyword">int</span> y = <span class="number">456</span>;

<span class="comment">// Block declaration and assignment</span>
<span class="keyword">void</span> (^aBlock)(<span class="keyword">int</span>) = ^(<span class="keyword">int</span> z)
{
  <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, x, y, z);
};

<span class="comment">// Execute the block</span>
aBlock(<span class="number">789</span>); <span class="comment">//pritns: 123 456 789</span>
</code></pre><p>The following is a summary of some of the key guidelines you should consider when designing your blocks:</p>
<ul>
<li>For blocks that you plan to perform asynchronously using a dispatch queue, it is safe to capture scalar variables from the parent function or method and use them in the block. However, you should not try to capture large structures or other pointer-based variables that are allocated and deleted by the calling context. By the time your block is executed, the memory referenced by that pointer may be gone. Of course, it is safe to allocate memory yourself and explicitly hand off ownership of that memory to the block.</li>
<li>Dispatch queues copy blocks that  are added to them, and they release blocks when they finish executing. In other words, you do not need to explicitly copy blocks before adding them to a queue.</li>
<li>Although queues are more efficient than raw threads at executing small tasks, there is still overhead to creating blocks and executing them on a queue. If a block does too little work, it may be cheaper to execute it inline than dispatch it to a queue. The way to tell if a block is doing too little work is to gather metrics for each path using the performance tools and compare them.</li>
<li>Do not cache data relative to the underlying thread and expect that data to be accessible from a different block. If tasks in the same queue need to share data, use the context  pointer of the dispatch queue to store the data instead.</li>
<li>If your block creates more than a few Objective-C objects. you might want to enclose parts of your block’s code in an @autorelease block to handle the memory management for those objects. Although GCD dispatch queues have their own autorelease pools, they make no guarantees as to when those pools are drained. If your application is memory constrained, creating your own autorelease pool allows you to free up the memory for autoreleased objects at more regular intervals.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/10/18/iOS-block-总结/" data-id="cl8wql7ai001203xkc7yxba2v" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Floating-Point-in-C-CS-APP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/08/Floating-Point-in-C-CS-APP/" class="article-date">
  <time datetime="2013-08-08T13:21:01.000Z" itemprop="datePublished">2013-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/08/08/Floating-Point-in-C-CS-APP/">Floating Point in C --- CS:APP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>All versions of C provide two different floating-point data types: float and double. On machines that support IEEE floating point, these data types correspond to single-and double-precision floating point. In addition, the machines use the round-to-even rounding mode. Unfortunately, since the C standards do not require the machine to use IEEE floating point, there are no standard methods to change the rounding mode or to get special values such as -0, +00,-00, or NaN.</p>
<p>Most systems provide a combination of include (‘.h’) files and procedure libraries to provide access to these features, but the details vary from one system to another. For example, the GNU compiler GCC defines program constants INFINITY and NAN when the following sequence occurs in the program file:</p>
<pre><code><span class="hexcolor">#def</span>ine _GNU_SOURCE <span class="number">1</span>

<span class="hexcolor">#def</span>ine &lt;math.h&gt;
</code></pre><p>More recent versions of C, including ISO C99, include a third floating-point data type, long double. For many machines and compilers, this data type is equivalent to the double data type. For Intel-compatible machines, however, GCC implements this data type using an 80-bit “extended precision” format, providing a much larger range and precision than does the standard 64-bit format.</p>
<p><strong>When casting values between int, float, and double formats, the program changes the numeric values and the bit representations as follows (assuming a 32-bit int):</strong></p>
<ul>
<li>From int to float, the number cannot overflow, but it may be rounded.</li>
<li>From int or float to double, the exact numeric value can be preserved because double has both greater range(i.e., the range of representable values), as well as greater precision(i.e., the number of significant bits).</li>
<li>From double to float, the value can overflow to +00 or -00, since the range is smaller. Otherwise, it may be rounded, because the precision is smaller.</li>
<li>From float or double to int the value will be rounded toward zero. For examople, 1.999 will be converted to 1, while -1.999 will be converted to -1. Furthermore, the value may overflow. The C standards do not specify a fixed result for this case. Intel-compatible microprocessors designate thebit pattern[10…00] as an integer indefinite value. Any conversion from floating point to integer that cannot assign a reasonable integer approximation yields this value. Thus, the expression (int) +1e10 yields -21483648, generating a negative value from a positive one.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/08/08/Floating-Point-in-C-CS-APP/" data-id="cl8wql7hl002p03xk32rym19o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-signed-vs-unsigned-in-C-CS-APP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/08/signed-vs-unsigned-in-C-CS-APP/" class="article-date">
  <time datetime="2013-08-08T11:18:30.000Z" itemprop="datePublished">2013-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/08/08/signed-vs-unsigned-in-C-CS-APP/">signed vs. unsigned in C ---CS:APP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Some of the peculiar behavior arises due to C’s handling of expressions containing combinations of signed and unsigned quantities. <strong>When an operation is performed where one operand is signed and the other is unsigned, C implicitly casts the signed argument to unsigned and performs the operations assuming the numbers are nonnegative</strong>. As we will see, this convention makes little difference for standard arithmetic operations, but it leads to nonintuitive results for relational operators such as &lt; and &gt;.</p>
<p><strong>Consider the comparison -1 &lt; 0U. Since the second operand is unsigned, the first one is implicitly cast to unsigned, and hence the expression is unsigned, the first one is implicitly cast to unsigned, and hence the expression is equivalent to the comparison 4294967295U &lt; 0U, which of course is false.</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/08/08/signed-vs-unsigned-in-C-CS-APP/" data-id="cl8wql78c000j03xkbi4xtn4e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Pointers-and-Arrays-the-C-programming-language" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/07/21/Pointers-and-Arrays-the-C-programming-language/" class="article-date">
  <time datetime="2013-07-21T08:03:51.000Z" itemprop="datePublished">2013-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/07/21/Pointers-and-Arrays-the-C-programming-language/">Pointers and Arrays --- the C programming language</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In ANSI C, generic pointer is void *;</p>
<p>The unary operator &amp; gives the address of an object, so the statement p = &c; assigns the address of c to the variable p, and p is said to “point to” c. The &amp; operator <strong>only</strong> applies to objects in memory: <strong>variables and arrays element</strong>. It cannot be applied to expressions, constants, or register variables.</p>
<p>The unary operator * is the indirection  or dereferencing operator; when applied to a pointer, it accesses the object the pointer points to.</p>
<pre><code><span class="keyword">int</span> x = <span class="number">1</span>, y = <span class="number">2</span>, z[<span class="number">10</span>];

<span class="keyword">int</span> *ip; <span class="comment">/* ip is a pointer to int */</span>

ip = &amp;x; <span class="comment">/*ip now points to x */</span>

y = *ip; <span class="comment">/*y is now 1 */</span>

*ip = <span class="number">0</span>; <span class="comment">/* x is now 0*/</span>

ip = &amp;z[<span class="number">0</span>]; <span class="comment">/* ip now points to z[0] */</span>
</code></pre><p>You should also not the implication that a pointer is constrained to point to a particular kind of object: every pointer points to a specific data type. (There is one exception: a “pointer to void” is used to hold any type of pointer but cannot be dereferenced iteself.)</p>
<p>If ip points to the integer x, then *ip can occur in any context where x could, so</p>
<pre><code>*<span class="literal">ip</span> = *<span class="literal">ip</span> + <span class="number">10</span><span class="comment">;</span>
</code></pre><p>increments *ip by 10.</p>
<p>The unary operators * and &amp; bind more tightly than arithmetic operators, so the assignment</p>
<pre><code>y = *<span class="literal">ip</span> + <span class="number">1</span>
</code></pre><p>takes whatever ip points at, adds 1, and assigns the result to y , while</p>
<pre><code>*<span class="literal">ip</span> += <span class="number">1</span>
</code></pre><p>incrments what ip points to, as do</p>
<pre><code>++*<span class="literal">ip</span>
</code></pre><p>and <strong>(*ip)++</strong></p>
<p>The parentheses are necessary in this last example; without them, the expression would increment ip instead of what it points to , beacuse unary operators like * and ++ associate right to left.</p>
<p>Finally, since pointers are variables, they can be used without dereferencing. For example, if iq is another pointer to int, iq = ip</p>
<p>copies the contents of ip into iq, thus making iq point to whatever ip point to whatever ip pointed to.</p>
<p><strong>Pointers and Arrays</strong></p>
<p>Any operation that can be achieved by array subscripting can also be done with pointers. The pointer version will in general be faster but, at least to the uninitiated, somewhat harder to understand.</p>
<p>If pa points to a particular element of an arrya, then by definition pa+1 points to the next element, pa+i points i elements after pa, and pa-i points i elements before. Thus, if pa points to a[0],</p>
<p>*(pa + 1)</p>
<p>refers to the contents of a[1], pa+i is the address of a[i], and *(pa+i) is the contents of a[i].</p>
<p>The correspondence between indexing and pointer arithmetic is very close. By definition, the value of a variable or expression of type array is the address of element zero of the array. Thus after the assignment pa = &amp;a[0]; pa and a have identical values. Since the name of an array is a synonym for the location of the initial element, the assignment pa = &amp;a[0] can also be written as pa = a;</p>
<p>In short, an array-and-index expression is equivalent to one written as a pointer and offset.</p>
<p><strong>There is one difference between an array name and a pointer that must be kept in mind. A pointer is a variable, so pa=a and pa++ are legal. But array name is not a variable;constructions like a=pa and a++ are illegal.</strong></p>
<p>When an array name is passed to a function, what is passed is the location of the initial element. Within the called function, this argument is a local variable, and so an array name parameter is a pointer, that is, a variable containing an address.</p>
<p><strong>Address Arithmetic</strong></p>
<p>Pointer arithmetic is consistent: if we had been dealing with floats, which occupy more storage than chars, and if p were a pointer to float, p++ would advance to the next float. Thus we could write another version of alloc that maintains floats instead of chars, merely by changing char to float throughout alloc and afree. All the pointer manipulations automatically take into account the size of the object pointed to.</p>
<p>The valid pointer operations are assignment of pointers of the same type, adding or subtracting a pointer and an integer, subtracting or comparing two pointers to members of the same array, and assigning or comparing to zero. All other pointer arithmetic is illegal. It is not legal to add two pointers, or to multiply or divide or shift or mask them, or to add float or double to them, or even, except for void *, to assign a pointer of one type to a pointer of another type without a cast.</p>
<p><strong>Pointer Arrays</strong></p>
<p>initialization of pointer arrays:</p>
<p>The syntax is similar to previous initializations:</p>
<pre><code><span class="comment">/* month_name: return name of n-th month */</span>

<span class="function"><span class="keyword">char</span> *<span class="title">month_name</span><span class="params">(<span class="keyword">int</span> n)</span>

</span>{

<span class="keyword">static</span> <span class="keyword">char</span> *name[] = {

    <span class="string">"Illegal month"</span>,

    <span class="string">"January"</span>, <span class="string">"February"</span>, <span class="string">"March"</span>,

    <span class="string">"April"</span>, <span class="string">"May"</span>, <span class="string">"June"</span>,

    <span class="string">"July"</span>, <span class="string">"August"</span>, <span class="string">"September"</span>,

    <span class="string">"October"</span>, <span class="string">"November"</span>, <span class="string">"December"</span>

};

<span class="keyword">return</span> (n &lt; <span class="number">1</span> || n &gt; <span class="number">12</span>) ? name[<span class="number">0</span>] : name[n];

}
</code></pre><p><strong>Pointers vs. Multi-dimensional Arrays</strong></p>
<p>Newcomers to C are sometimes confused about the difference between a two-dimensional array and an array of pointers, such as name in the example above. Given the definitions</p>
<pre><code>int a[<span class="link_label">10</span>][<span class="link_reference">20</span>];

int *b[10];
</code></pre><p>then <code>a[3][4]</code> and <code>b[3][4]</code> are both syntactically legal references to a single int. But a is a true two-dimensional array: 200 int-sized locations have been set aside, and the conventional rectangular subscript calculation 20xrow+col is used to find the element <code>a[row][col]</code>. For b, however, the definition only allocates 10 pointers and does not initialize them; initialization must be done explicitly, either statically or with code. Assuming that each element of b does point to a twenty-element array, then there will be 200 ints set aside, plus ten cells for the pointers. The important advantage of the pointer array is that the rows of the array may be of different lengths. That is, each element of b need not point ot a twenty-element vector; some may point to two elements, some to fifty, and some to none at all.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/07/21/Pointers-and-Arrays-the-C-programming-language/" data-id="cl8wql7g0002d03xkho36z0z8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-C-initialization-the-C-programming-language" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/07/20/C-initialization-the-C-programming-language/" class="article-date">
  <time datetime="2013-07-20T08:59:37.000Z" itemprop="datePublished">2013-07-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/07/20/C-initialization-the-C-programming-language/">C initialization --- the C programming language</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>In the absence of explicit initialization, external and static variables</strong> are guaranteed to be <strong>initialized</strong> to <strong>zero</strong>; <strong>automatic</strong> and <strong>register</strong> variables have <strong>undefined (i.e., garbage) initial values</strong>.</p>
<p>Scalar variables may be initialized when they are defined, by following the name with an equals sign and an expression:</p>
<pre><code><span class="keyword">int</span> x = <span class="number">1</span>;

<span class="keyword">char</span> squote = <span class="string">'\''</span>;

<span class="keyword">long</span> day = <span class="number">1000L</span> * <span class="number">60L</span> * <span class="number">24L</span>; <span class="comment">/* milliseconds/day */</span>
</code></pre><p><strong>For external and static variables, the initializer must be a constant expression; the initialization is done once, conceptually before the grogram begins execution.</strong></p>
<p>For automatic and register variables, the initializer is not restricted to being a constant: it may be any expression involving previoously defined values, even function calls.</p>
<p>In effect, initializations of automatic variables are just shorthand for assignment statements. Which form to prefer is largely a matter of taste. We have generally used explicit assignments, because initializers in declarations are harder to see and further away from the point of use.</p>
<p>An array may be initialized by following its declaration with a list of initializers enclosed in braces and separated by commas. For example, to initialize an array days with the number of days in each month:</p>
<pre><code><span class="keyword">int</span> days[] = { <span class="number">31</span>, <span class="number">28</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>,<span class="number">30</span>, <span class="number">31</span>};
</code></pre><p>when the size of the array is omitted, the compiler will compute the length by counting the initializers, of which there are 12 in this case.</p>
<p>If there are fewer initializers for an array than the number specified, the missing elements will be zero for external, static, and automatic variables. It is an error to have too many initializers. There is no way to specify repetition of an initializer, nor to initialize an element in the middle of an array without supplying all the preceding values as well.</p>
<p>character arrays are a special case of initialization; a string may be used instead of the braces and commas notation:</p>
<pre><code><span class="built_in">char</span> pattern<span class="literal">[]</span> = <span class="string">"ould"</span>;
</code></pre><p>is a shorthand for the longer but equivalent</p>
<pre><code><span class="keyword">char</span> pattern[] = { <span class="string">'o'</span>,<span class="string">'u'</span>,<span class="string">'l'</span>,<span class="string">'d'</span>,<span class="string">'\0'</span>};
</code></pre><p>In this case, the array size is five (four characters plus the terminating ‘\0’).</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/07/20/C-initialization-the-C-programming-language/" data-id="cl8wql7is002z03xkyckyscs5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Debugging-the-practice-of-programming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/07/19/Debugging-the-practice-of-programming/" class="article-date">
  <time datetime="2013-07-19T08:01:19.000Z" itemprop="datePublished">2013-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/07/19/Debugging-the-practice-of-programming/">Debugging--the practice of programming</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>With the right attitude debugging can be fun, like solving a puzzle, but whether we enjoy it or not, debugging is an art that we will practice regularly. Still, it would be nice if bugs didn’t happen, so we try to avoid them by writing code well in the first place. Well-written code has fewer bugs to begin with and those that remain are easier to find.</p>
<p>Once a bug has been seen, the first thing to do is to think hard about the clues it presents. How could it have come about? Is it something familiar? Was something just changed in the program? Is there something special about the input data that provoked it? A few well-chosen test cases and a few print statements in the code may be enough.</p>
<p>If there aren’t good clues, hard thinking is still the best first step, to be followed by systematic attempts to narrow down the location of the problem. One step is cutting down the input data to make a small input that fails; another is cutting out code to eliminate regions that can’t be related. It’s possible to insert checking code that gets turned on only after the program has executed some number of steps, again to try to localize the problem. All of these are instances of a general strategy, divide and conquer, which is as effective in debugging as it is in politics and war.</p>
<p>Use other aids as well. Explaining your code to someone  else (even a teddy bear) is wonderfully effective.  Use a debugger to get a stack trace. Use some of the commercial tools that check for memory leaks, array bounds violations, suspect code, and the like. Step through your program when it has become clear that you have the wrong mental picture of how the code works.</p>
<p>Know yourself, and the kinds of errors you make. Once you have found and fixed a bug, make sure that you eliminate other bugs that might be similar. Think about what happened so you can avoid making that kind  of mistake again.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/07/19/Debugging-the-practice-of-programming/" data-id="cl8wql7ho002r03xkejd6d7zg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/programming/">programming</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS-中文英文字符集" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/06/03/iOS-中文英文字符集/" class="article-date">
  <time datetime="2013-06-03T06:53:05.000Z" itemprop="datePublished">2013-06-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/03/iOS-中文英文字符集/">iOS 中文英文字符集</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ (NSCharacterSet *) chineseAndEngSet&#10;&#123;&#10;    if (chineseNameSet == nil)&#10;   &#123;&#10;      NSMutableCharacterSet *aCharacterSet = [[NSMutableCharacterSet alloc] init];&#10;&#10;      NSRange lcEnglishRange;&#10;      lcEnglishRange.location = (unsigned int)0x4e00;&#10;      lcEnglishRange.length = (unsigned int)0x9fa5 - (unsigned int)0x4e00;&#10;      [aCharacterSet addCharactersInRange:lcEnglishRange];&#10;      [aCharacterSet addCharactersInString:@&#34;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;];&#10;      chineseAndEngSet = aCharacterSet;&#10;    &#125;&#10;  return chineseAndEngSet;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>中文字符的正则表达式（包含繁体中文） <code>^[\u4E00-\u9FA5]+$</code></p>
<p>验证中文</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)validateInputWithString:(NSString *)aString&#10;&#123;&#10;  NSString * const regularExpression = @&#34;^[\u4E00-\u9FA5]+$&#34;;&#10;  NSError *error = NULL;&#10;  NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regularExpression&#10;                                                                         options:NSRegularExpressionCaseInsensitive&#10;                                                                           error:&#38;error];&#10;  if (error) &#123;&#10;      NSLog(@&#34;error %@&#34;, error);&#10;  &#125;&#10;&#10;  NSUInteger numberOfMatches = [regex numberOfMatchesInString:aString&#10;                                                      options:0&#10;                                                        range:NSMakeRange(0, [aString length])];&#10;  return numberOfMatches &#62; 0;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>判断双空格方法</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string&#123;&#10;&#10;//Check for double space&#10; return !(range.location &#62; 0 &#38;&#38;&#10;        [string length] &#62; 0 &#38;&#38;&#10;        [[NSCharacterSet whitespaceCharacterSet] characterIsMember:[string characterAtIndex:0]] &#38;&#38;&#10;        [[NSCharacterSet whitespaceCharacterSet] characterIsMember:[[textField text] characterAtIndex:range.location - 1]]);&#10;&#10;&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/06/03/iOS-中文英文字符集/" data-id="cl8wql7ag001003xkfwu5c805" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS-View-Controller-Lifecycle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/05/27/iOS-View-Controller-Lifecycle/" class="article-date">
  <time datetime="2013-05-27T15:31:52.000Z" itemprop="datePublished">2013-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/05/27/iOS-View-Controller-Lifecycle/">iOS View Controller Lifecycle</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><code>ViewDidLoad</code>:</p>
<p>After instantiation and outlet-setting, viewDidLoad is called, this is an exceptionally good place to put a lot of setup code.</p>
<pre><code><span class="tag">-</span>(void)<span class="tag">viewDidLoad</span>
{

<span class="attr_selector">[super viewDidLoad]</span>;<span class="comment">//always let super have a chance in lifecycle methods</span>

<span class="comment">//do some setup of my MVC</span>
}
</code></pre><p>But be careful because the geometry of your view(its bounds) is not set yet!</p>
<p><code>viewWillAppear:(BOOL)animated</code>:</p>
<p>Just before the view appears on screen, you get notified</p>
<p>(argument is just whether you are appearing instantly or over time via animation)</p>
<p>Your view will only get “loaded” once, but it might appear and disappear a lot. So don’t put something in this method that really wants to be in viewDidLoad. Otherwise, you might be doing something over and over unnecessarily.</p>
<p>Do something here if things you display are changing while your MVC is off-screen.</p>
<p>Summary: This method is for geometry-related initialization, lazy execution and late updating.</p>
<p><code>-(void)viewWillDisappear:(BOOL)animated</code></p>
<p>You get notified when you will disappear off screen, this is where you put “remember what’s going on” and cleanup code.</p>
<pre><code><span class="tag">-</span>(void)<span class="tag">viewWillDisappear</span>:(BOOL)<span class="tag">animated</span>

{

<span class="attr_selector">[super viewWillDisappear:animated]</span>;<span class="comment">//call super in all the viewWill/Did... methods</span>

<span class="comment">//let's be nice to the user and remember the scroll position they were at...</span>

<span class="attr_selector">[self saveDataToPermanentStore]</span>;<span class="comment">//maybe do in did instead?</span>

<span class="comment">//but be careful not to do anything time-consuming here, or app will be sluggish</span>

<span class="comment">//maybe even kick off a thread to do what needs doing here</span>

}
</code></pre><p>In ios with AutoLayout, you have to do such stuff in <code>viewDidLayoutSubviews</code> (also previously mentioned).  <code>viewDidLayoutSubviews</code> is the method sent to you after constraints have been processed.Note that while <code>viewWillAppear:</code> will get called only as you go (back) on screen…</p>
<p><code>viewDidLayoutSubviews</code> is called every time self.view’s bounds changes (i.e. more ofter). This makes perfect sense when you think about it.</p>
<p>Doing geometry-dependent stuff in <code>viewWillAppear:</code> is an artifact from the days when</p>
<p>a) there was no Autolayout and b) there was no viewDidLayoutSubviews!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/05/27/iOS-View-Controller-Lifecycle/" data-id="cl8wql7ax001403xk7zyto3wj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-emacs-and-vim-配置文件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/05/21/emacs-and-vim-配置文件/" class="article-date">
  <time datetime="2013-05-21T06:37:52.000Z" itemprop="datePublished">2013-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/05/21/emacs-and-vim-配置文件/">emacs and vim 配置文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>vim:<a href="https://github.com/vgod/vimrc" target="_blank" rel="external">https://github.com/vgod/vimrc</a></p>
<p>emacs:<a href="https://github.com/purcell/emacs.d" target="_blank" rel="external">https://github.com/purcell/emacs.d</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/05/21/emacs-and-vim-配置文件/" data-id="cl8wql7ec001m03xkcfhmw6j7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编辑器配置文件/">编辑器配置文件</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLite/">SQLite</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix/">Unix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/combine/">combine</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux-archlinux/">linux, archlinux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phonegap/">phonegap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/programming/">programming</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reading/">reading</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift-source-code/">swift source code</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编辑器配置文件/">编辑器配置文件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书/">读书</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 17.5px;">C</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/Unix/" style="font-size: 10px;">Unix</a> <a href="/tags/combine/" style="font-size: 12.5px;">combine</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/linux-archlinux/" style="font-size: 10px;">linux, archlinux</a> <a href="/tags/phonegap/" style="font-size: 10px;">phonegap</a> <a href="/tags/programming/" style="font-size: 10px;">programming</a> <a href="/tags/reading/" style="font-size: 17.5px;">reading</a> <a href="/tags/swift-source-code/" style="font-size: 15px;">swift source code</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/编辑器配置文件/" style="font-size: 10px;">编辑器配置文件</a> <a href="/tags/读书/" style="font-size: 10px;">读书</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">十二月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">六月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">五月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">十二月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">十一月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">五月 2012</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/06/Four-Thousand-Weeks/">Four Thousand Weeks</a>
          </li>
        
          <li>
            <a href="/2022/07/06/麦肯锡方法/">麦肯锡方法</a>
          </li>
        
          <li>
            <a href="/2022/06/19/悉达多/">悉达多</a>
          </li>
        
          <li>
            <a href="/2022/06/13/信心/">信心</a>
          </li>
        
          <li>
            <a href="/2022/06/04/Combine-Publisher/">Combine: Publisher</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Anyuan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">home</a>
  
    <a href="/archives" class="mobile-nav-link">archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>